#include "loops_finder.h"
#include "acutest.h"


void test_loop_finder() {
    int array1[] = {0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 
                    0, 0, 0, 0, 0, 0, 1, 0, 0, 0, 
                    0, 0, 0, 0, 0, 1, 0, 1, 0, 0, 
                    0, 0, 0, 0, 0, 1, 0, 1, 0, 0, 
                    0, 0, 1, 0, 0, 0, 1, 0, 0, 0, 
                    1, 1, 0, 1, 1, 1, 1, 1, 1, 0, 
                    0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 
                    0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 
                    0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 
                    0, 0, 0, 0, 0, 0, 0, 0, 0, 0
                    };
                    
    int array2[] = {0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 
                    0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 
                    0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 
                    0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 
                    0, 0, 1, 0, 0, 0, 0, 0, 0, 0, 
                    1, 1, 0, 1, 1, 0, 0, 0, 0, 0, 
                    0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 
                    0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 
                    0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 
                    0, 0, 0, 0, 0, 0, 0, 0, 0, 0
                    };

    int array3[] = {0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 
                    0, 0, 0, 0, 0, 0, 0, 0, 1, 0, 
                    0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 
                    0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 
                    0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 
                    0, 1, 0, 0, 1, 0, 0, 0, 0, 0, 
                    0, 0, 1, 0, 0, 0, 0, 0, 0, 0, 
                    0, 0, 0, 0, 0, 0, 1, 0, 0, 0, 
                    0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 
                    0, 0, 0, 0, 0, 0, 0, 0, 0, 0
                    };

    int array4[] = {0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 
                    0, 0, 0, 0, 0, 0, 1, 0, 0, 0, 
                    0, 0, 0, 0, 0, 1, 0, 1, 0, 0, 
                    0, 0, 0, 0, 0, 1, 0, 1, 0, 0, 
                    0, 0, 1, 0, 0, 0, 1, 0, 0, 0, 
                    1, 1, 0, 1, 1, 1, 1, 1, 1, 0, 
                    0, 0, 0, 0, 0, 0, 1, 0, 0, 0, 
                    0, 0, 0, 0, 0, 1, 0, 1, 0, 0, 
                    0, 0, 0, 0, 0, 0, 1, 0, 0, 0, 
                    0, 0, 0, 0, 0, 0, 0, 0, 0, 0
                    };
    
    int array5[] = {0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 
                    0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 
                    0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 
                    0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 
                    0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 
                    0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 
                    0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 
                    0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 
                    0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 1, 
                    0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 1, 
                    0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 1, 
                    0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 1, 1, 0, 0, 0, 1, 
                    0, 0, 0, 0, 0, 0, 0, 1, 1, 0, 0, 0, 0, 1, 0, 0, 1, 0, 0, 1, 
                    0, 0, 0, 0, 0, 0, 0, 1, 0, 1, 0, 0, 0, 1, 0, 0, 0, 1, 1, 0, 
                    0, 0, 0, 0, 0, 0, 0, 0, 1, 0, 0, 0, 0, 1, 0, 0, 0, 1, 0, 0, 
                    0, 0, 0, 0, 0, 1, 1, 1, 0, 1, 0, 0, 0, 0, 1, 1, 1, 0, 0, 0, 
                    0, 0, 0, 0, 1, 0, 0, 0, 0, 0, 1, 0, 0, 0, 0, 0, 1, 0, 0, 0, 
                    0, 0, 1, 1, 0, 0, 0, 0, 0, 0, 1, 0, 0, 0, 0, 1, 0, 0, 0, 0, 
                    0, 1, 0, 0, 0, 0, 0, 0, 0, 0, 1, 0, 0, 0, 1, 0, 0, 0, 0, 0, 
                    1, 0, 0, 0, 0, 0, 0, 0, 0, 0, 1, 1, 1, 1, 0, 0, 0, 0, 0, 0};

    int num_loop = -1, start_row = -1, start_col = -1, finish_row = -1, finish_col = -1;


    find_loops(array1, sizeof(array1)/sizeof(int), &num_loop, &start_row, &start_col, &finish_row, &finish_col);
    TEST_ASSERT(num_loop == 1 && start_row == 5 && start_col == 0 && finish_row == 5 && finish_col == 8);

    find_loops(array2, sizeof(array2)/sizeof(int), &num_loop, &start_row, &start_col, &finish_row, &finish_col);
    TEST_ASSERT(num_loop == 0 && start_row == 5 && start_col == 0 && finish_row == 5 && finish_col == 4);

    find_loops(array3, sizeof(array3)/sizeof(int), &num_loop, &start_row, &start_col, &finish_row, &finish_col);
    TEST_ASSERT(num_loop == 0 && start_row == -1 && start_col == -1 && finish_row == -1 && finish_col == -1);

    find_loops(array4, sizeof(array4)/sizeof(int), &num_loop, &start_row, &start_col, &finish_row, &finish_col);
    TEST_ASSERT(num_loop == 2 && start_row == 5 && start_col == 0 && finish_row == 5 && finish_col == 8);

    find_loops(array5, sizeof(array5)/sizeof(int), &num_loop, &start_row, &start_col, &finish_row, &finish_col);
    TEST_ASSERT(num_loop == 2 && start_row == 19 && start_col == 0 && finish_row == 8 && finish_col == 19);


}


TEST_LIST = {
    {"Find strung loop", test_loop_finder},
    {NULL, NULL}
};